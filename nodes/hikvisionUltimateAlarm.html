<script type="text/javascript">
	RED.nodes.registerType('hikvisionUltimateAlarm', {
		category: 'Hikvision Ultimate',
		color: '#e6e6e6',
		defaults: {
			name: { value: "" },
			server: { type: "Hikvision-config", required: true },
			reactto: { value: "vmd" }		
		},
		inputs: 0,
		outputs: 2,
		outputLabels: function (i) {
			var ret = "";
			switch (i) {
				case 0:
					return "Payload";
					break;
				case 1:
					return "Error";
					break;
				case 2
					:
					return "";
					break;
				default:
					break;
			}
		},
		icon: "node-radar-icon.png",
		label:
			function () {
				var label = "hikvisionUltimateAlarm"
				if (this.name !== undefined && this.name.length > 0) {
					label = this.name;
				}
				return label + " " + this.reactto;
			},
		paletteLabel: function () {
			return "Radar alarm";
		},
		oneditprepare: function () {


		},
		oneditsave: function () {

		}
	});


</script>

<script type="text/x-red" data-template-name="hikvisionUltimateAlarm">
	<div class="form-row">
		<label for="node-input-server">Server</label>
		<input type="text" id="node-input-server" />
	</div>
	<div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
	<div class="form-row">
        <label for="node-input-topic"><i class="fa fa-tasks"></i> Node topic</label>
        <input type="text" id="node-input-topic" placeholder="Node's own topic">
	</div>
	<div class="form-row">
        <label for="node-input-reactto"><i class="fa fa-tasks"></i> React to</label>
		<select id="node-input-reactto">
			<option value="vmd">Video motion (when motion is detected)</option>
			<option value="io">Local alarm input (it's the device's IO pigtail connector)</option>
			<option value="linedetection">Line crossing (when someone crosses a line)</option>
			<option value="videoloss">Video loss (when the camera loses the video signal)</option>
			<option value="shelteralarm">Video blind (when you put something in front of the camera to block image)</option>
		</select>
		<div class="form-tips" style="margin-top:11px">
           The above option allow the node to react to alarms coming from one of these events.
        </div>
	</div>
  
</script>

<script type="text/x-red" data-help-name="hikvisionUltimateAlarm">
	<p>
        <a href="https://www.paypal.me/techtoday" target="_blank"><img src='https://img.shields.io/badge/Donate-PayPal-blue.svg?style=flat-square' width='30%'></a>
        
	</p>
	<p>
		The node outputs true/false on PIN 1, and a connection state on PIN 2 (true if the node is connecte to the server, otherwise false).
	</p>
	
</script>